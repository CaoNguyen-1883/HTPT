spring:
    application:
        name: code-migration

server:
    port: ${SERVER_PORT:8080}

# Logging
logging:
    level:
        com.htpt.migration: DEBUG
        org.springframework.web.socket: INFO


# ============================================================
# COORDINATOR MODE (Default)
# Chạy trên laptop chính - quản lý toàn bộ cluster
# ============================================================
---
spring:
    config:
        activate:
            on-profile: coordinator

server:
    port: ${SERVER_PORT:8080}

node:
    mode: coordinator
    # Số lượng demo nodes (chỉ dùng khi không có worker thực)
    demo-nodes: ${DEMO_NODES:0}


# ============================================================
# WORKER MODE
# Chạy trên các laptop worker - kết nối đến coordinator
# ============================================================
---
spring:
    config:
        activate:
            on-profile: worker

server:
    port: ${SERVER_PORT:8081}

node:
    mode: worker
    # ID của node này (bắt buộc, phải unique)
    id: ${NODE_ID:worker-1}
    # IP của laptop này (để coordinator biết địa chỉ)
    host: ${NODE_HOST:localhost}
    # Port của laptop này
    port: ${SERVER_PORT:8081}
    # URL của Coordinator (IP:Port của laptop chạy coordinator)
    coordinator-url: ${COORDINATOR_URL:http://localhost:8080}


# ============================================================
# DEMO MODE - Chạy tất cả trên 1 máy với simulated nodes
# ============================================================
---
spring:
    config:
        activate:
            on-profile: demo

server:
    port: 8080

node:
    mode: coordinator
    demo-nodes: 5
